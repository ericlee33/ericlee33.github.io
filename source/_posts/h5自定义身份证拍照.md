---
title: H5å®ç°è‡ªå®šä¹‰èº«ä»½è¯æ‹ç…§
date: 2021-04-11 17:43:52
tags: 
- h5
top: 101
---
>demoæºç ï¼šhttps://github.com/ericlee33/h5-id-card ï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ç‚¹ä¸ªstarğŸ‘
## èƒŒæ™¯


ç”±äºh5é€šè¿‡ `<input type="file />`Â æ–¹å¼åŠèµ·æ‹ç…§çš„ä¸ºç³»ç»Ÿç›¸æœºï¼Œç»™ç”¨æˆ·çš„ä½“éªŒå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ²¡æœ‰è£åˆ‡æ¡†ï¼Œä¹Ÿæ— æ³•åœ¨ç³»ç»Ÿç›¸æœºä¸Šé™„åŠ  `tips`Â è’™å±‚è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚åœ¨è’™å±‚ä¸Šå‘ŠçŸ¥ç”¨æˆ·æ‹ç…§çš„æ³¨æ„äº‹é¡¹ã€‚æ‰€ä»¥ä¸šåŠ¡ä¸Šéœ€è¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰æ‹ç…§èº«ä»½è¯çš„é¡µé¢ã€‚


## å‰æœŸå‡†å¤‡å·¥ä½œ


### å„ç«¯å…¼å®¹æ€§ç°çŠ¶
**ç»“è®ºï¼š**
**å®‰å“ï¼šchrome53ç‰ˆæœ¬ä¹‹åæ”¯æŒè¯¥apiã€‚**
**iosï¼šä»…safari11+æ”¯æŒã€‚ioså¾®ä¿¡å†…ç½®æµè§ˆå™¨ã€Chromeã€Edgeç­‰å…¶å®ƒæµè§ˆå™¨å‡ä¸æ”¯æŒã€‚**

### è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆ
**ä»¥ä¸‹æƒ…å†µï¼Œå‡éœ€è¦è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆï¼š**
****ç¬¬ä¸€ç±»ï¼šå½“æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼Œå‡éœ€è¦é‡‡ç”¨ç³»ç»Ÿç›¸æœºæ‹ç…§æ–¹æ¡ˆ****
1.ç”¨æˆ·ä¸æä¾›æ‘„åƒå¤´æƒé™ã€‚
2.å‘½ä¸­ä»¥ä¸‹å…¶ä¸­ä»»æ„ä¸€æ¡é”™è¯¯

- `AbortError`ï¼»ä¸­æ­¢é”™è¯¯ï¼½
- `NotAllowedError`ï¼»æ‹’ç»é”™è¯¯ï¼½
- `NotFoundError`ï¼»æ‰¾ä¸åˆ°é”™è¯¯ï¼½
- `NotReadableError`ï¼»æ— æ³•è¯»å–é”™è¯¯ï¼½
- `OverConstrainedError`ï¼»æ— æ³•æ»¡è¶³è¦æ±‚é”™è¯¯ï¼½
- `SecurityError`ï¼»å®‰å…¨é”™è¯¯ï¼½
- `TypeError`ï¼»ç±»å‹é”™è¯¯ï¼½

3.ç”¨æˆ·æµè§ˆå™¨ä¸æ”¯æŒè¯¥api

**ç¬¬äºŒç±»ï¼šå½“iosç”¨æˆ·ä½¿ç”¨ésafariæµè§ˆå™¨è®¿é—®h5é¡µé¢æ—¶**
ç”±äºiosåªæœ‰safari11+å¯ä»¥åŠèµ·åç½®æ‘„åƒå¤´è§†é¢‘æµï¼Œå¦‚æœiosç”¨æˆ·åœ¨ésafariæµè§ˆå™¨æ‰“å¼€h5ç™»é™†é¡µï¼Œéƒ½è¦ç›´æ¥å¼•å¯¼ç”¨æˆ·å¤åˆ¶é“¾æ¥åˆ°safariæµè§ˆå™¨æ‰“å¼€ï¼Œé¿å…æ¥ä¸‹æ¥æ— æ³•è¿›è¡Œè‡ªå®šä¹‰æ‹ç…§ã€‚è¿™é‡Œç‰›å®¢åšçš„å°±æ¯”è¾ƒå¥½ï¼Œå¯ä»¥ä»¿ç…§ç‰›å®¢åšä¸€ä¸ªå¼•å¯¼æŒ‰é’®ã€‚
<p align="center">
    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/708978852bda482590512e26b3c761ad~tplv-k3u1fbpfcp-zoom-1.image" width="40%">
</p>

## æ­£ç‰‡å¼€å§‹

> **æœ¬æ–‡ä¸æ¶‰åŠæ›¿ä»£æ–¹æ¡ˆçš„å…¼å®¹é€»è¾‘ï¼Œå¯ä»¥è‡ªè¡Œåœ¨ `Promise.reject()`Â æ—¶è¿›è¡Œå¯¹åº”å¤„ç†ã€‚**

æˆ‘ä»¬çš„ä¸»è§’æ˜¯ `MediaDevices.getUserMedia()`Â ï¼Œ `MDN`Â å¯¹è¯¥apiçš„ä»‹ç»å¦‚ä¸‹
> `MediaDevices.getUserMedia()`Â ä¼šæç¤ºç”¨æˆ·ç»™äºˆä½¿ç”¨åª’ä½“è¾“å…¥çš„è®¸å¯ï¼Œåª’ä½“è¾“å…¥ä¼šäº§ç”Ÿä¸€ä¸ª[`MediaStream`](https://developer.mozilla.org/zh-CN/docs/Web/API/MediaStream)ï¼Œé‡Œé¢åŒ…å«äº†è¯·æ±‚çš„åª’ä½“ç±»å‹çš„è½¨é“ã€‚æ­¤æµå¯ä»¥åŒ…å«ä¸€ä¸ªè§†é¢‘è½¨é“ï¼ˆæ¥è‡ªç¡¬ä»¶æˆ–è€…è™šæ‹Ÿè§†é¢‘æºï¼Œæ¯”å¦‚ç›¸æœºã€è§†é¢‘é‡‡é›†è®¾å¤‡å’Œå±å¹•å…±äº«æœåŠ¡ç­‰ç­‰ï¼‰ã€ä¸€ä¸ªéŸ³é¢‘è½¨é“ï¼ˆåŒæ ·æ¥è‡ªç¡¬ä»¶æˆ–è™šæ‹ŸéŸ³é¢‘æºï¼Œæ¯”å¦‚éº¦å…‹é£ã€A/Dè½¬æ¢å™¨ç­‰ç­‰ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶å®ƒè½¨é“ç±»å‹ã€‚

### èƒ½åŠ›æ£€æµ‹

---

ç”±äºä¸åŒæµè§ˆå™¨å¯¹äºæ ‡å‡†çš„å®ç°ä¸ä¸€è‡´ï¼Œéœ€è¦ä½œapièƒ½åŠ›çš„å…¼å®¹ï¼Œé¿å…ç”¨æˆ·æµè§ˆå™¨æ— æ³•æ­£å¸¸è°ƒç”¨è¯¥apiã€‚
```javascript
//è®¿é—®ç”¨æˆ·åª’ä½“è®¾å¤‡çš„å…¼å®¹æ–¹æ³•
function getUserMedia(constrains) {
    if (navigator.mediaDevices?.getUserMedia) {
        //æœ€æ–°æ ‡å‡†API
        return navigator.mediaDevices.getUserMedia(constrains);
    } else if (navigator.webkitGetUserMedia) {
        //webkitå†…æ ¸æµè§ˆå™¨
        return navigator.webkitGetUserMedia(constrains);
    } else if (navigator.mozGetUserMedia) {
        //Firefoxæµè§ˆå™¨
        return navigator.mozGetUserMedia(constrains);
    } else if (navigator.getUserMedia) {
        //æ—§ç‰ˆAPI
        return navigator.getUserMedia(constrains);
    }
}
```
### åœ¨é¡µé¢ä¸Šæ”¾ç½®ä¸€ä¸ªvideoå…ƒç´ 

---

```jsx
<video
   id="video"
   autoPlay
   muted
   playsInline
   style={{
    width: '100%',
  }}
></video>
```
æœ‰å‡ ä¸ªæ³¨æ„ç‚¹âš ï¸
> iOS 10 Safari å…è®¸è‡ªåŠ¨æ’­æ”¾ä»¥ä¸‹ä¸¤ç§è§†é¢‘ï¼š
> - æ— éŸ³è½¨è§†é¢‘ï¼›
> - æ— å£°éŸ³è§†é¢‘ï¼ˆè®¾ç½®äº† `muted` å±æ€§ï¼‰ï¼›
> 
å¯¹äºè¿™ä¸¤ç§ç±»å‹çš„è§†é¢‘ï¼Œå¯ä»¥é€šè¿‡ `<video autoplay>` æˆ– `video.play()` ä¸¤ç§æ–¹å¼æ¥è‡ªåŠ¨æ’­æ”¾ï¼Œæ— éœ€ç”¨æˆ·ä¸»åŠ¨æ“ä½œã€‚ä½†æ˜¯ï¼Œå¦‚æœå®ƒä»¬åœ¨æ’­æ”¾æ—¶å˜å¾—æœ‰å£°éŸ³ï¼ˆè·å–äº†éŸ³è½¨ï¼Œæˆ–è€… `muted` å±æ€§è¢«å–æ¶ˆï¼‰ï¼ŒSafari ä¼šæš‚åœæ’­æ”¾ã€‚

- åªæœ‰æä¾› `muted`Â å±æ€§ï¼Œè®©è§†é¢‘é™éŸ³ï¼Œæ‰å¯ä»¥é€šè¿‡ `<video autoplay>` æˆ– `video.play()` ä¸¤ç§æ–¹å¼æ¥è¿›è¡Œæ’­æ”¾
- å¿…é¡»æä¾› `playsInline`Â å±æ€§ï¼Œä¸ç„¶åœ¨iosä¸Šä¼šåªæ’­æ”¾ä¸€å¸§





### è°ƒç”¨å°è£…å¥½çš„**getUserMediaï¼Œè·å–ç”¨æˆ·åª’ä½“æµ**

---

è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™`constrains`Â å¯¹è±¡å¯ä»¥å¤šç§ä¸åŒçš„å€¼ï¼Œæ¥è·å–ç”¨æˆ·è®¾å¤‡åº•å±‚å„ç§ä¸åŒçš„åª’ä½“æµã€‚


- `video: true`Â **ï¼ˆé»˜è®¤è°ƒå–å‰ç½®æ‘„åƒå¤´ï¼‰**
- ä¸ºäº†è°ƒå–åç½®æ‘„åƒå¤´ï¼Œéœ€è¦é€šè¿‡ `facingMode: { exact: 'environment' }`Â æ¥è¿›è¡Œè°ƒç”¨**ï¼ˆå¦‚æœåç½®æ‘„åƒå¤´ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå¯¼è‡´è·å–åª’ä½“æµå¤±è´¥
- ä¸ºäº†è·å–ç‰¹å®šåˆ†è¾¨ç‡çš„è§†é¢‘æµï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šç›¸åº”çš„ `width`Â `height`**ï¼ˆä½†è¿™ç§æ–¹å¼æœ‰ç¼ºé™·ï¼Œä¸€æ—¦ç”¨æˆ·è®¾å¤‡ä¸å­˜åœ¨å¯¹äºåƒç´ æµï¼Œåˆ™ä¼šå¯¼è‡´è·å–åª’ä½“æµå¤±è´¥ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸å¯¹åƒç´ è¿›è¡Œå®šåˆ¶ï¼Œä½¿ç”¨è‡ªåŠ¨è·å–åˆ°çš„åª’ä½“æµåƒç´ ï¼‰**
```javascript
/**
 * è¯¥å‡½æ•°éœ€è¦æ¥å—ä¸€ä¸ªvideoçš„domèŠ‚ç‚¹ä½œä¸ºå‚æ•°
 */
function getUserMediaStream(videoNode) {
  	/** 
     * è°ƒç”¨apiæˆåŠŸçš„å›è°ƒå‡½æ•°
     */
    function success(stream, video) {
        return new Promise((resolve, reject) => {
            video.srcObject = stream;

            video.onloadedmetadata = function () {
                video.play();
                resolve();
            };
        });
    }
  
    //è°ƒç”¨ç”¨æˆ·åª’ä½“è®¾å¤‡ï¼Œè®¿é—®æ‘„åƒå¤´
    return getUserMedia({
        audio: false,
        video: { facingMode: { exact: 'environment' } },
        // video: true,
        // video: { facingMode: { exact: 'environment', width: 1280, height: 720 } },
    })
        .then(res => {
            return success(res, videoNode);
        })
        .catch(error => {
            console.log('è®¿é—®ç”¨æˆ·åª’ä½“è®¾å¤‡å¤±è´¥ï¼š', error.name, error.message);
            return Promise.reject();
        });
}

```
**å½“å‰æ•ˆæœï¼š**
<p align="center">
    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d4f04c1b98a4d0594fa9ceace06ec7a~tplv-k3u1fbpfcp-zoom-1.image" width="40%" />
</p>

### å¢åŠ è£åˆ‡æ¡†å’Œå¤–éƒ¨é˜´å½±

---

- è£åˆ‡æ¡†æˆ‘ä»¬æ ¹æ®éœ€æ±‚å†™åˆ°é¡µé¢ä¸­ï¼Œä¹‹åä¼šé€šè¿‡  `getBoundingClientRect`Â è·å–è£åˆ‡æ¡†çš„ä½ç½®è¿›è¡Œè£åˆ‡ã€‚
- å¤–éƒ¨é˜´å½±ä½¿ç”¨ `box-shadow`Â å³å¯
```jsx
<div className={styles['shadow-layer']} style={{ height: `${videoHeight}px` }}>
  <div id="capture-rectangle" className={styles['capture-rectangle']}></div>
</div>
```
```css
@function remB($px) {
    @return ($px/75) * 1rem;
}

.shadow-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1;
  overflow: hidden;

  .capture-rectangle {
    margin: remB(200) auto 0;
    width: remB(700);  // è¿™é‡Œå†™ä¸Šæˆ‘ä»¬éœ€è¦è£åˆ‡çš„å®½
    height: remB(450); // è¿™é‡Œå†™ä¸Šæˆ‘ä»¬éœ€è¦è£åˆ‡çš„é«˜
    border: 1px solid #fff;
    border-radius: remB(20);
    z-index: 2;
    box-shadow: 0 0 0 remB(1000) rgba(0, 0, 0, 0.7); // å¤–å±‚é˜´å½±
  }
}
```
**å½“å‰æ•ˆæœï¼š**

<p align="center">
    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4e4c33994f0e4c23a21265b91f43dc7a~tplv-k3u1fbpfcp-zoom-1.image" width="40%" />
</p>

### å®Œæˆå®æ—¶ç…§ç‰‡è£åˆ‡ï¼Œä¸Šä¼ æœåŠ¡ç«¯è¿›è¡ŒOCRè¯†åˆ«

---

è£åˆ‡ç”¨åˆ°çš„æ˜¯ `canvas.getContext('2d).drawImage`Â çš„èƒ½åŠ›ã€‚
`void ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);`
> **MDNå¯¹è¯¥å±æ€§è¯´æ˜ï¼š**
> `image`ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡çš„å…ƒç´ ã€‚å…è®¸ä»»ä½•çš„ canvas å›¾åƒæº([`CanvasImageSource`](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasImageSource))ï¼Œä¾‹å¦‚ï¼š[`CSSImageValue` (en-US)](https://developer.mozilla.org/en-US/docs/Web/API/CSSImageValue)ï¼Œ[`HTMLImageElement`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement)ï¼Œ[`SVGImageElement` (en-US)](https://developer.mozilla.org/en-US/docs/Web/API/SVGImageElement)ï¼Œ[`HTMLVideoElement`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLVideoElement)ï¼Œ[`HTMLCanvasElement`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement)ï¼Œ[`ImageBitmap`](https://developer.mozilla.org/zh-CN/docs/Web/API/ImageBitmap) æˆ–è€…[`OffscreenCanvas`](https://developer.mozilla.org/zh-CN/docs/Web/API/OffscreenCanvas)ã€‚
https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage



å¯ä»¥æˆ‘ä»¬ä¼ å…¥ `video`Â ä½œä¸º `source`Â è¿›è¡Œè£åˆ‡ã€‚
**è¿™é‡Œè¦æ³¨æ„**

- `sx` å’Œ `sy` å¯¹åº”çš„æ˜¯è·ç¦»çœŸå® `video` å…ƒç´ çš„ `top` `left` è·ç¦»ï¼Œä¸æ˜¯é¡µé¢ä¸­ `video` çš„å¤§å°ï¼Œæ‹¿åˆ°è£åˆ‡æ¡†ä½ç½®å¤§å°ä¹‹åï¼Œéœ€è¦åšè½¬æ¢ï¼Œå†è¿›è¡Œè£åˆ‡ï¼Œå¦åˆ™è£åˆ‡ä½ç½®ä¼šå¯¹ä¸ä¸Šã€‚
```javascript

/**
* è·å–videoä¸­å¯¹åº”çš„çœŸå®size
*/
function getXYRatio() {
  // videoHeightä¸ºvideo çœŸå®é«˜åº¦
  // offsetHeightä¸ºvideo cssé«˜åº¦
  const { videoHeight: vh, videoWidth: vw, offsetHeight: oh, offsetWidth: ow } = video;

  return {
    yRatio: height => {
      return (vh / oh) * height;
    },
    xRatio: width => {
      return (vw / ow) * width;
    },
  };
}

```


åœ¨è°ƒç”¨ `getUserMediaStream`Â æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹æ•æ‰è§†é¢‘æµï¼Œæ¯éš”å‡ ç§’è¿›è¡Œæˆªå›¾ï¼Œå‘é€åˆ°æœåŠ¡å™¨ã€‚
```javascript
/** è£åˆ‡ä¸Šä¼ ç›¸å…³æ ¸å¿ƒä»£ç   */
const Photo = () => {
		const [videoHeight, setVideoHeight] = useState(0);
    const ref = useRef(null);

    useEffect(() => {
        const video = document.getElementById('video');
        const rectangle = document.getElementById('capture-rectangle');
        const _canvas = document.createElement('canvas');
        _canvas.style.display = 'block';

        getUserMediaStream(video)
            .then(() => {
                setVideoHeight(video.offsetHeight);
                startCapture();
            })
            .catch(err => {
                showFail({
                  text: 'æ— æ³•è°ƒèµ·åç½®æ‘„åƒå¤´ï¼Œè¯·ç‚¹å‡»ç›¸å†Œï¼Œæ‰‹åŠ¨ä¸Šä¼ èº«ä»½è¯',
                  duration: 6,
                });
            });


        function startCapture() {
          ref.current = setInterval(() => {
            const { yRatio, xRatio } = getXYRatio();
            /** è·å–è£åˆ‡æ¡†çš„ä½ç½® */
            const { left, top, width, height } = rectangle.getBoundingClientRect();

            const context = _canvas.getContext('2d');
            _canvas.width = width;
            _canvas.height = height;

            // void ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);
            context.drawImage(
              video,
              xRatio(left + window.scrollX),
              yRatio(top + window.scrollY),
              xRatio(width),
              yRatio(height),
              0,
              0,
              width,
              height,
            );

            // è·å–å½“å‰æˆªå›¾çš„base64ç¼–ç 
            const base64 = _canvas.toDataURL('image/jpeg');
            // è¿™é‡Œå¯ä»¥å†æ ¹æ®åœºæ™¯åšbase64å‹ç¼©
            // æ¯2ç§’è°ƒç”¨OCRæ¥å£ï¼Œä¸Šä¼ base64åˆ°æœåŠ¡ç«¯è¿›è¡Œè¯†åˆ«
          }, 2000);
        }

        /** æ¸…ç©ºå®šæ—¶å™¨ */
        return () => clearInterval(ref.current);
    }, []);
}

```
**æ³¨æ„ï¼š**
`sx`Â ã€ `sy`Â çš„å€¼æ˜¯ç›¸å¯¹æ ¹å…ƒç´ çš„ï¼Œé€šè¿‡ `getBoundingClientRect`Â æ‹¿åˆ°çš„ `top`Â å’Œ `left`Â æ˜¯ç›¸å½“äºè§†å£çš„ï¼Œéœ€è¦åŠ ä¸Š `scroll`Â çš„å€¼ã€‚


## ç»“è¯­


å®é™…ä¸Š `getUserMedia`Â Â åœ¨å®‰å“å’Œ `MacOs`Â ä¸Šè·‘èµ·æ¥å‡ ä¹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç¤¾åŒºä¸­å¯¹äºè¯¥ `api`Â çš„è®¨è®ºå¤ªå°‘äº†ï¼Œå¯èƒ½å¤§éƒ¨åˆ†äººç”šè‡³ä¸çŸ¥é“è¿™ä¸ª `api`Â çš„å­˜åœ¨ï¼Œåœ¨ `ios`Â çœŸæœºä¸Šè¿›è¡Œè°ƒè¯•æ—¶ï¼Œä¸€å¼€å§‹åªå±•ç¤ºæœ‰ä¸€å¸§ï¼Œä¾¿é™æ­¢äº†ï¼ŒæŠ¥é”™ä¸ä¼šç»™äºˆå¼€å‘è€…æ¯”è¾ƒè¯¦ç»†çš„æç¤ºï¼Œæˆ‘ä¸€å¼€å§‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨äº†ç ”ç©¶ `ios`Â ç«¯ä¸ºä»€ä¹ˆæ— æ³•æ­£å¸¸è°ƒç”¨è¯¥ `api`Â ã€‚ä¸è¿‡è¿™ç§ä¸šåŠ¡åœºæ™¯åœ¨ `app` ä¸Šåº”è¯¥æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œæœ¬æ–‡ä»…ä¸ºh5è¯¥ä¸šåŠ¡åœºæ™¯çš„å®ç°æ–¹å¼ã€‚


**é™„ä¸€å¼ æœ€ç»ˆæ•ˆæœå›¾ï¼š**

<p align="center">
    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f3b8bfd242a470ebc26f6336b9177fa~tplv-k3u1fbpfcp-zoom-1.image" width="40%" />
</p>


## References


1.iOS13 getUserMedia not working on chrome and edge
[https://stackoverflow.com/questions/63084076/ios13-getusermedia-not-working-on-chrome-and-edge](https://stackoverflow.com/questions/63084076/ios13-getusermedia-not-working-on-chrome-and-edge)
[https://bugs.webkit.org/show_bug.cgi?id=208667](https://bugs.webkit.org/show_bug.cgi?id=208667)
It prevents ALL other browsers on iOS to offer video-conferencing, while Safari can => it's a nasty anti-competitive behaviour that will for sure be scrutinized by US House Antitrust Committee & EU Commission, and Apple should not accumulate evidence of evil conduct.


2.MDN getUserMedia [https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getUserMedia](https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getUserMedia)


3.ios10+è§†é¢‘æ’­æ”¾æ–°ç­–ç•¥ [https://imququ.com/post/new-video-policies-for-ios10.html](https://imququ.com/post/new-video-policies-for-ios10.html)
