---
title: è¶…å¥½ç”¨çš„Reactè„šæ‰‹æ¶ï¼Œå¿«æ¥è¯•è¯•å§
date: 2021-04-25 18:10:47
tags:
- node.js
- cli
- react.js
---
> è‡ªå»ºè„šæ‰‹æ¶åœ°å€ï¼Œè§‰å¾—å¥½ç”¨çš„è¯æ¬¢è¿ç‚¹ä¸ªâœ¨ï¼š
> [https://github.com/ericlee33/create-compositive-react-app-cli](https://github.com/ericlee33/create-compositive-react-app-cli)




**æ•ˆæœå›¾**
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf4e4c991aad4ce099f5f492191d4796~tplv-k3u1fbpfcp-zoom-1.image)

## èƒŒæ™¯

- ç”±äºæœ€è¿‘å…¬å¸å†…ï¼Œç«‹é¡¹äº†å¤šä¸ªä¸åŒä¸šåŠ¡ï¼Œé¡¹ç›®ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä½†åº•å±‚æ¶æ„ç›¸ä¼¼ï¼Œä»0æ­å»ºæ–°é¡¹ç›®å˜æˆäº†å¾ˆå¯»å¸¸çš„äº‹æƒ…ï¼Œå½“ä½ ä¸€ä¸ªäº‹æƒ…åšå¤šäº†ä¹‹åï¼Œå°±æ„Ÿè§‰åˆ°å¾ˆéš¾å—ï¼Œä½œä¸ºä¸€ä¸ªå·¥å…·äººï¼Œéœ€è¦æƒ³åŠæ³•è§£å†³æ‰è¿™ä¸ªé—®é¢˜ã€‚



- å½“é€šè¿‡`create-react-app`åˆ›å»ºé¡¹ç›®æ¨¡æ¿ä¹‹åï¼Œè¿˜éœ€è¦åˆ é™¤æ‰ä¸€å †ä¸éœ€è¦çš„ä¸œè¥¿ï¼Œå®‰è£…å¾ˆå¤šæ¡†æ¶ç”Ÿæ€é“¾ï¼ŒLinterç­‰ä¾èµ–ï¼Œå®Œæˆinstallåï¼Œè¿˜è¦é…ç½®é¡¹ç›®åº•å±‚å„ç§ä¸œè¥¿ï¼Œå¾ˆè€—è´¹ç²¾åŠ›å’Œæ—¶é—´ã€‚


## FBå·²ç»æä¾›äº†create-react-appï¼Œä¸ºä»€ä¹ˆè¿˜è¦åšreactè„šæ‰‹æ¶ï¼Ÿ


### å…ˆè°ˆè°ˆvue-cliçš„ä¼˜ç‚¹

- æä¾›äº†å¯é€‰é…ç½®é¡¹ï¼ˆç”±äº`Vue`å‘¨è¾¹ç”Ÿæ€è¾ƒä¸ºå•ä¸€ï¼Œå®˜æ–¹æä¾›çš„è·¯ç”±/çŠ¶æ€ç®¡ç†æ–¹æ¡ˆåªæœ‰ä¸€ä¸ªï¼Œä¸åƒ`React`ç”Ÿæ€å…‰ä¸€ä¸ªçŠ¶æ€ç®¡ç†æ–¹æ¡ˆå°±æœ‰`MobXã€Redux-Sagaã€Redux-Thunk`ç­‰ç­‰ã€‚ã€‚ï¼‰
- ä»¤äººèˆ’é€‚çš„`Inquirer`ç•Œé¢ï¼ˆä¸åƒ`create-react-app`ï¼Œé€šè¿‡æ‰§è¡Œè„šæ‰‹æ¶æ—¶ï¼Œä¼ å…¥ä¸åŒ`configuration`æ¥åˆ›å»ºä¸åŒéœ€æ±‚çš„æ¨¡æ¿ï¼‰
- æä¾›ä¿å­˜é…ç½®çš„åŠŸèƒ½

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07defb28770c437c9e7f4be3f73ef1e9~tplv-k3u1fbpfcp-zoom-1.image)
![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/391857c9c41a42f7857405a48ae1cb02~tplv-k3u1fbpfcp-zoom-1.image)

### create-react-appçš„ç¼ºç‚¹

åœ¨æˆ‘çœ‹æ¥ï¼Œä»0å¿«é€Ÿæ­å»ºé¡¹ç›®çš„è§’åº¦çœ‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜

- æœªæä¾›å¯é€‰`react-router`è·¯ç”±é…ç½®çš„æ¨¡æ¿
- æœªæä¾›çŠ¶æ€ç®¡ç†`Lib`
- æ²¡æœ‰æä¾›`Linter`ï¼Œ`Coding`è¿‡ç¨‹å¾ˆä¸çˆ½
- ä¸€äº›å·¥å…·åº“`npm`åŒ…ä¸­æ²¡æœ‰`typing`æ–‡ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨å»å®‰è£…`@types`æ— æ³•äº«å—`vscode`åˆ©ç”¨`@types`æ–‡ä»¶åœ¨`js`ä¸­ä¹Ÿæä¾›ä»£ç æç¤ºçš„å¿«æ„Ÿã€‚



ä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡ˆæä¾›çš„Routerè¯´æ˜ï¼š

> Create React App å¹¶æœªè§„å®šç‰¹å®šçš„Router(è·¯ç”±)è§£å†³æ–¹æ¡ˆï¼Œä½† React Router æ˜¯æœ€å—æ¬¢è¿çš„ Router(è·¯ç”±) è§£å†³æ–¹æ¡ˆã€‚
> è¦æ·»åŠ å®ƒï¼Œè¯·è¿è¡Œï¼š

> æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ `yarn`:
> è¦å°è¯•å®ƒï¼Œåˆ é™¤ `src/App.js` ä¸­çš„æ‰€æœ‰ä»£ç ï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºå…¶ç½‘ç«™ä¸Šçš„ä»»ä½•ç¤ºä¾‹ã€‚ [åŸºæœ¬ç¤ºä¾‹](https://reacttraining.com/react-router/web/example/basic) æ˜¯å¼€å§‹å°è¯•çš„å¥½åœ°æ–¹ã€‚
> è¯·æ³¨æ„ï¼Œåœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œ[ä½ å¯èƒ½éœ€è¦é…ç½®ç”Ÿäº§æœåŠ¡å™¨ä»¥æ”¯æŒå®¢æˆ·ç«¯è·¯ç”±](http://www.html.cn/create-react-app/docs/deployment#serving-apps-with-client-side-routing)ã€‚

```
npm install --save react-router-dom
```

```
yarn add react-router-dom
```




### ç¤¾åŒºæœ‰æ²¡æœ‰ç°æˆæ–¹æ¡ˆå‘¢ï¼Ÿ


- åœ¨ `github`Â ä¸Šæœç´¢ `react-scaffold`Â ã€`reactè„šæ‰‹æ¶`Â ï¼Œå¾ˆéš¾åœ¨ç¤¾åŒºä¸­æ‰¾åˆ°ä¸€ä¸ªå®Œæ•´æ»¡è¶³è‡ªå·±éœ€æ±‚çš„è„šæ‰‹æ¶

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4361d13c1f4549e79ffba727c509e8bc~tplv-k3u1fbpfcp-zoom-1.image)

- å¯ä»¥çœ‹åˆ°æœç´¢ç»“æœå¤§å¤šæ˜¯`Archived`æˆ–æ— äººç»´æŠ¤çš„é¡¹ç›®ã€‚



## å¼€å§‹è‡ªåˆ¶è„šæ‰‹æ¶

ä¸ºäº†è§£å†³ä»¥ä¸Š`create-react-app`ç—›ç‚¹ï¼Œæˆ‘å†³å®šä»¿ç…§`vue-cli`ï¼Œåˆ¶ä½œä¸€ä¸ª`react`çš„é›†æˆè„šæ‰‹æ¶ã€‚

### æŠ€æœ¯æ ˆ

ä¸ºäº†æ›´æ–¹ä¾¿å¼€å‘è„šæ‰‹æ¶ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹nodeå·¥å…·ğŸ”§

- **commander** å‘½ä»¤è¡Œ
- **inquirer** äº¤äº’å¼å‘½ä»¤
- **ejs** æ¨¡æ¿æ¸²æŸ“
- **execa** å­è¿›ç¨‹ç®¡ç†å·¥å…·
- **chalk** ç”¨äºè¾“å‡ºå¸¦é¢œè‰²çš„log
- **ora** å¯ä»¥åœ¨å‘½ä»¤è¡Œå±•ç¤ºspinning

### é¡¹ç›®ç›®å½•
```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ bin
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ commitlint.config.js
â”œâ”€â”€ lib
â”‚   â”œâ”€â”€ Creator.js
â”‚   â”œâ”€â”€ Generator.js
â”‚   â”œâ”€â”€ PromptModuleAPI.js
â”‚   â”œâ”€â”€ config.js
â”‚   â”œâ”€â”€ create.js
â”‚   â”œâ”€â”€ defaultFeaturesPrompts.js
â”‚   â”œâ”€â”€ generator
â”‚   â”‚   â”œâ”€â”€ linter
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â””â”€â”€ template ...æ­¤å¤„çœç•¥templateæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ react
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â””â”€â”€ template ...æ­¤å¤„çœç•¥templateæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ redux
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â””â”€â”€ template ...æ­¤å¤„çœç•¥templateæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ router
â”‚   â”‚       â”œâ”€â”€ index.js
â”‚   â”‚       â””â”€â”€ template ...æ­¤å¤„çœç•¥templateæ–‡ä»¶
â”‚   â”œâ”€â”€ getPromptModules.js
â”‚   â”œâ”€â”€ promptModules
â”‚   â”‚   â”œâ”€â”€ linter.js
â”‚   â”‚   â”œâ”€â”€ moduleConstantsName.js
â”‚   â”‚   â”œâ”€â”€ redux.js
â”‚   â”‚   â””â”€â”€ router.js
â”‚   â”œâ”€â”€ templates
â”‚   â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”‚   â”œâ”€â”€ index.jsx
â”‚   â”‚   â”‚   â””â”€â”€ index.module.scss
â”‚   â”‚   â”œâ”€â”€ config.js
â”‚   â”‚   â”œâ”€â”€ createTemplate.js
â”‚   â”‚   â”œâ”€â”€ templatePrompts.js
â”‚   â”‚   â””â”€â”€ views
â”‚   â”‚       â”œâ”€â”€ index.jsx
â”‚   â”‚       â””â”€â”€ index.module.scss
â”‚   â””â”€â”€ utils
â”‚       â”œâ”€â”€ chalk.js
â”‚       â”œâ”€â”€ copyDir.js
â”‚       â”œâ”€â”€ executeCommand.js
â”‚       â””â”€â”€ isObject.js
â””â”€â”€ package.json
```


### é¡¹ç›®æ€»ç»“

æ€»ç»“ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹æ¨¡å—

- **/bin/index.js**

å‘½ä»¤è¡Œè°ƒç”¨è„šæ‰‹æ¶çš„å…¥å£
ä¸»è¦æ”¾ç½®äº†`commander`å‘½ä»¤

- **/lib/create.js**

æ‰§è¡Œå®Œåœ¨å‘½ä»¤è¡Œè¾“å…¥çš„`commander`åï¼Œåœ¨è¿™é‡Œæ‰§è¡Œå˜é‡æ³¨å…¥ä¸æ¨¡æ¿æ¸²æŸ“ç­‰é€»è¾‘

>   1. æ³¨å…¥æ¯ç§ä¸åŒæ¨¡æ¿é¡¹ï¼Œä»å…¶ `/lib/promptModules/${name}` å¢åŠ ä¸åŒçš„`prompts`
>   2. æ‰§è¡Œ`inquirer`
>   3. æ ¹æ®ç”¨æˆ·æ‰€é€‰é¡¹ï¼Œæ‹¼æ¥`package.json`
>   4. æ³¨å…¥æ¨¡æ¿æ‰€éœ€çš„`ejs`å˜é‡ï¼Œé€šè¿‡`ejs`è¿›è¡Œæ¨¡æ¿æ¸²æŸ“ï¼Œä¸åŒçš„é…ç½®é¡¹æœ€ç»ˆä¼šç”Ÿæˆä¸åŒçš„`react-app`é¡¹ç›®æ¨¡æ¿



- **/lib/promptModules/**

ä¸º`inquirer`æ³¨å…¥ä¸åŒçš„`prompts`é€‰é¡¹

- **/lib/generator**

`React`é¡¹ç›®æ¨¡æ¿ï¼Œæ¯ä¸€ç§æ¨¡æ¿ï¼Œè¦æ±‚äº†ä¸åŒé…ç½®é¡¹ï¼Œä¼šæ ¹æ®ç”¨æˆ·é€‰æ‹©ï¼ŒåŠ¨æ€æ³¨å…¥åˆ°æœ€ç»ˆç”Ÿæˆçš„é¡¹ç›®ä¸­

- **/utils**

å·¥å…·

- **/templates**

`components`å’Œ`views`æ¨¡æ¿æ³¨å…¥


### æœªæ¥ä¼˜åŒ–é¡¹

- `ejs`æ³¨å…¥å¯é€‰é¡¹ä¸å‹å¥½ï¼Œæ¯”å¦‚ä¸ºäº†åŠ¨æ€åœ¨`App.jsx`å…¥å£ä¸­ï¼Œæ ¹æ®ç”¨æˆ·æ‰€é€‰é…ç½®é¡¹åˆ¤æ–­æ˜¯å¦`import React-Routerã€Redux`ç­‰ï¼Œv1ç‰ˆæœ¬ç›®å‰æ˜¯é€šè¿‡æ ¹æ®`answers`ï¼Œä½¿ç”¨`Ejs`æ¥æ¸²æŸ“çš„ã€‚æœªæ¥è¿™ä¸€å—å¯ä»¥ä¼˜åŒ–ä¸ºé€šè¿‡ä¿®æ”¹æ–‡ä»¶çš„`AST`ï¼Œæ¥å®ç°é…ç½®çš„æ³¨å…¥ï¼Œå¯¹æ¨¡æ¿çš„ä¾µå…¥æ€§ä¼šæ›´ä½ã€‚
- åç»­éœ€è¦åœ¨é¡¹ç›®ä¸­åŠ å…¥`Jest`å•å…ƒæµ‹è¯•ï¼Œä¿è¯è„šæ‰‹æ¶åç»­è¿­ä»£ï¼Œå¯¹ä¸»æµç¨‹åŠŸèƒ½ä¸ä¼šé€ æˆå½±å“ã€‚

å¦‚æœå¤§å®¶æƒ³äº†è§£é¡¹ç›®ç»†èŠ‚ï¼Œåç»­æˆ‘å¯ä»¥å†å†™ä¸€ç¯‡å…³äºé¡¹ç›®ä¸­ç»†èŠ‚çš„æ–‡ç« ã€‚



## è‡ªåˆ¶Reacté›†æˆè„šæ‰‹æ¶ åŠŸèƒ½ä»‹ç»

### npmåœ°å€
[npmæºåœ°å€](https://www.npmjs.com/package/create-compositive-react-app-cli)

### Introduction è„šæ‰‹æ¶ä»‹ç»

å‡å°‘ä»0åˆ°1æ­å»ºé¡¹ç›®çš„æˆæœ¬ï¼Œå¿«é€Ÿå¼€å‘é¡¹ç›®
åœ¨`create-react-app` `v4.0.3`è„šæ‰‹æ¶åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å¦‚ä¸‹é¡¹ç›®é…ç½®å¯é€‰é¡¹

- `React-Redux + Redux-Thunk + Redux-Logger`
- `React-Router` (å¯é€‰æ‹©`History`, `Hash`æ¨¡å¼)
- `Linter / Formatter` ï¼ˆç›®å‰æä¾›äº†`Eslint + EditorConfig + Prettier + CommitLint`ï¼‰

å®Œæˆæ¨¡æ¿åˆ›å»ºåï¼Œè‡ªåŠ¨å®‰è£…ä¾èµ–ã€‚

### Getting started å¿«é€Ÿä½¿ç”¨

- æ¨èä½¿ç”¨ `npx create-compositive-react-app-cli init <your project name>`
- ä¹Ÿå¯ä½¿ç”¨ `npm i -g create-compositive-react-app-cli` `ccra init <your project name>`


### Usage ä½¿ç”¨æ–¹æ³•

##### å¿«é€Ÿæ­å»ºé¡¹ç›®

`ccra init <name>`
é…ç½®é¡¹æœ‰3ç§å¯é€‰é¡¹:

- Redux
- React-Router (å¯é€‰æ‹©History, Hashæ¨¡å¼)
- Linter / Formatter ï¼ˆç›®å‰æä¾›äº†Eslint + EditorConfig + Prettier + CommitLintï¼‰

##### å¿«é€Ÿåˆ›å»ºPageã€Componentæ¨¡æ¿

`ccra create`
å¯ä»¥åœ¨ **CLI** ä¸­è‡ªè¡Œé€‰æ‹©åˆ›å»º **Page** æˆ– **Component** è¾“å…¥ **name** åå³å¯å®Œæˆæ¨¡æ¿è‡ªåŠ¨åˆ›å»º


### Features åŠŸèƒ½ä»‹ç»

- ä¸€é”®å¿«é€Ÿåˆ›å»º`Page`ç»„ä»¶
- ä¸€é”®å¿«é€Ÿåˆ›å»º`Components`ç»„ä»¶
- åœ¨`ccra init <name>`è¿›è¡Œåˆå§‹åŒ–é¡¹ç›®æ—¶ï¼Œé€šè¿‡`Inquirer`åº“çš„åŠŸèƒ½ï¼Œæä¾›ç»™ç”¨æˆ·å„ç±»å¯é€‰é¡¹ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·æ‰€éœ€é…ç½®ï¼Œè¿›è¡Œé¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºã€‚
  - æ³¨ï¼šçŠ¶æ€ç®¡ç†æš‚æ—¶ä»…æä¾›`Redux`æ¨¡æ¿
  - è·¯ç”±ç®¡ç†æä¾›`React-Router` `v5`æ¨¡æ¿
- è‡ªåŠ¨å®‰è£…æ‰€éœ€è¦çš„`@types`æ–‡ä»¶ï¼Œå³ä¾¿ç”¨æˆ·ä½¿ç”¨`JavaScript`è¿›è¡Œå¼€å‘ï¼Œä¹Ÿèƒ½åœ¨`vscode IDE`ä¸‹å¾—åˆ°å‡½æ•°æç¤ºæ”¯æŒ